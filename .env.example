# =============================================================================
# AI Assistant — Environment Configuration
# Copy this file to .env and fill in your values.
# =============================================================================

# -----------------------------------------------------------------------------
# Required
# -----------------------------------------------------------------------------
ANTHROPIC_API_KEY=sk-ant-...

# -----------------------------------------------------------------------------
# Core
# -----------------------------------------------------------------------------
ASSISTANT_MODEL=claude-sonnet-4-20250514
ASSISTANT_MAX_TOKENS=8192
ASSISTANT_DATA_DIR=./data
# DEBUG | INFO | WARNING | ERROR
ASSISTANT_LOG_LEVEL=INFO

# Server (for `assistant serve`)
ASSISTANT_HOST=127.0.0.1
ASSISTANT_PORT=51430

# Session
ASSISTANT_MAX_CONTEXT_MESSAGES=50
# auto-approve read-only tool calls
ASSISTANT_AUTO_APPROVE_READS=true
# max tool-use rounds per LLM call before forcing a summary
ASSISTANT_MAX_TOOL_ROUNDS=10
# Only require approval for specific tools (comma-separated).
# Use "tool_name" or "tool_name:action" for action-specific control.
# When set, all other tools are auto-approved regardless of category.
# ASSISTANT_APPROVAL_REQUIRED_TOOLS=calendar:create,calendar:update,calendar:delete,schedule_reminder:create,schedule_reminder:cancel

# Default provider — which LLM to use (claude | openai | gemini | ollama)
ASSISTANT_DEFAULT_PROVIDER=claude

# -----------------------------------------------------------------------------
# OpenAI
# -----------------------------------------------------------------------------
OPENAI_API_KEY=sk-...
ASSISTANT_OPENAI_ENABLED=false
ASSISTANT_OPENAI_MODEL=gpt-4o

# -----------------------------------------------------------------------------
# Google Gemini — uses OpenAI-compatible endpoint
# -----------------------------------------------------------------------------
GEMINI_API_KEY=
ASSISTANT_GEMINI_ENABLED=false
ASSISTANT_GEMINI_MODEL=gemini-2.0-flash

# -----------------------------------------------------------------------------
# AWS Bedrock — uses boto3 credential chain (AWS_PROFILE, IAM roles, etc.)
# No API key needed — configure AWS credentials via ~/.aws/credentials or env vars.
# -----------------------------------------------------------------------------
ASSISTANT_BEDROCK_ENABLED=false
ASSISTANT_BEDROCK_REGION=us-east-1
ASSISTANT_BEDROCK_MODEL=us.anthropic.claude-sonnet-4-20250514-v1:0

# -----------------------------------------------------------------------------
# Ollama — local LLM routing
# Simple/short requests are routed to the local model to save API costs.
# -----------------------------------------------------------------------------
ASSISTANT_OLLAMA_ENABLED=false
ASSISTANT_OLLAMA_BASE_URL=http://host.docker.internal:11434
ASSISTANT_OLLAMA_MODEL=llama3.2
# requests under this go to Ollama
ASSISTANT_LOCAL_MODEL_THRESHOLD_TOKENS=1000

# -----------------------------------------------------------------------------
# Web Search — SearXNG integration
# Self-host SearXNG: https://docs.searxng.org/
# -----------------------------------------------------------------------------
ASSISTANT_WEB_SEARCH_ENABLED=false
ASSISTANT_SEARXNG_URL=http://searxng:8080

# -----------------------------------------------------------------------------
# Vector Search — semantic similarity over conversation history
# Requires Ollama to be running with an embedding model available.
# -----------------------------------------------------------------------------
ASSISTANT_VECTOR_SEARCH_ENABLED=false
ASSISTANT_EMBEDDING_MODEL=nomic-embed-text

# -----------------------------------------------------------------------------
# YouTube — search videos, get metadata, extract transcripts (uses yt-dlp)
# -----------------------------------------------------------------------------
ASSISTANT_YOUTUBE_ENABLED=false

# -----------------------------------------------------------------------------
# Reddit — search posts, browse subreddits, read discussions (public JSON API)
# -----------------------------------------------------------------------------
ASSISTANT_REDDIT_ENABLED=false

# -----------------------------------------------------------------------------
# Google Maps — directions, nearby places, geocoding
# Get an API key at https://console.cloud.google.com/google/maps-apis
# Enable: Directions API, Places API, Geocoding API
# -----------------------------------------------------------------------------
ASSISTANT_GOOGLE_MAPS_ENABLED=false
GOOGLE_MAPS_API_KEY=

# Vision — override auto-detection for the main model
# Leave unset for auto-detect based on model name.
# ASSISTANT_VISION=true

# -----------------------------------------------------------------------------
# Media
# -----------------------------------------------------------------------------
ASSISTANT_MAX_MEDIA_SIZE_MB=10

# -----------------------------------------------------------------------------
# Telegram bot
# Create a bot via @BotFather and paste the token below.
# TELEGRAM_ALLOWED_USER_IDS is a comma-separated list of numeric user IDs.
# -----------------------------------------------------------------------------
ASSISTANT_TELEGRAM_ENABLED=false
TELEGRAM_BOT_TOKEN=
# e.g. 123456789,987654321
ASSISTANT_TELEGRAM_ALLOWED_USER_IDS=
# leave blank to use long-polling
ASSISTANT_TELEGRAM_WEBHOOK_URL=

# -----------------------------------------------------------------------------
# Slack — Socket Mode (no public URL needed)
# 1. Create a Slack app at https://api.slack.com/apps
# 2. Enable Socket Mode → get App-Level Token (xapp-...)
# 3. Add Bot Token Scopes: chat:write, app_mentions:read, im:history, im:read, im:write
# 4. Install to workspace → get Bot Token (xoxb-...)
# -----------------------------------------------------------------------------
ASSISTANT_SLACK_ENABLED=false
SLACK_BOT_TOKEN=xoxb-...
SLACK_APP_TOKEN=xapp-...
ASSISTANT_SLACK_ALLOWED_USER_IDS=
ASSISTANT_SLACK_ALLOWED_CHANNEL_IDS=

# -----------------------------------------------------------------------------
# WhatsApp bot — neonize linked-device pairing (scan QR on first run)
# WHATSAPP_ALLOWED_NUMBERS is a comma-separated list of E.164 numbers.
# -----------------------------------------------------------------------------
ASSISTANT_WHATSAPP_ENABLED=false
# e.g. +15551234567,+442071234567
ASSISTANT_WHATSAPP_ALLOWED_NUMBERS=
ASSISTANT_WHATSAPP_SESSION_NAME=assistant

# -----------------------------------------------------------------------------
# Scheduler — APScheduler-based automations
# -----------------------------------------------------------------------------
ASSISTANT_SCHEDULER_ENABLED=false
# e.g. America/New_York, Europe/London
ASSISTANT_SCHEDULER_TIMEZONE=UTC

# -----------------------------------------------------------------------------
# Plugins — third-party plugin system
# -----------------------------------------------------------------------------
ASSISTANT_PLUGINS_ENABLED=false

# -----------------------------------------------------------------------------
# Agents — LLM-driven sub-agents (researcher, coder, etc.)
# Define agents as YAML files in data/agents/.
# -----------------------------------------------------------------------------
ASSISTANT_AGENTS_ENABLED=false

# -----------------------------------------------------------------------------
# Watchdog — file-system monitoring
# WATCHDOG_PATHS is a comma-separated list of paths to watch.
# -----------------------------------------------------------------------------
ASSISTANT_WATCHDOG_ENABLED=false
# e.g. /home/user/docs,/tmp/incoming
ASSISTANT_WATCHDOG_PATHS=
ASSISTANT_WATCHDOG_DEBOUNCE_SECONDS=2.0
# auto-analyze changed files with LLM
ASSISTANT_WATCHDOG_ANALYZE=false

# -----------------------------------------------------------------------------
# Webhooks — inbound HTTP triggers mapped to workflows
# Uses bearer token auth: callers send "Authorization: Bearer <secret>"
# -----------------------------------------------------------------------------
ASSISTANT_WEBHOOK_ENABLED=false
# generate with: openssl rand -hex 32
ASSISTANT_WEBHOOK_SECRET=

# -----------------------------------------------------------------------------
# Google Calendar — reads/writes to Google Calendar via OAuth2
# 1. Create OAuth Desktop credentials in Google Cloud Console
# 2. Enable the Google Calendar API
# 3. Set client ID and secret below
# 4. Run `uv run assistant google-auth` to complete OAuth flow
# 5. Set ENABLED=true
# -----------------------------------------------------------------------------
ASSISTANT_GOOGLE_CALENDAR_ENABLED=false
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# Calendar ICS feeds — auto-synced on startup
# Comma-separated "name|url" pairs. Feeds are registered and synced each time
# the app starts (CLI or server). Events appear in `calendar today` / `calendar list`.
# -----------------------------------------------------------------------------
ASSISTANT_CALENDAR_FEEDS=Personal|https://calendar.google.com/calendar/ical/.../basic.ics,Work|https://...

# -----------------------------------------------------------------------------
# CalDAV — reads/writes to a CalDAV server (e.g. Radicale)
# See docs/calendar-setup.md for full setup instructions.
# When enabled, CalDAV is the primary calendar backend for CRUD operations.
# ICS feed subscriptions (add_feed/sync_feeds) still use SQLite.
# -----------------------------------------------------------------------------
ASSISTANT_CALDAV_ENABLED=false
ASSISTANT_CALDAV_URL=http://radicale:5232/assistant/calendar/
CALDAV_USERNAME=assistant
CALDAV_PASSWORD=

# -----------------------------------------------------------------------------
# Do-Not-Disturb — queue non-urgent notifications during quiet hours
# Times are in 24-hour HH:MM format, interpreted in SCHEDULER_TIMEZONE.
# -----------------------------------------------------------------------------
ASSISTANT_DND_ENABLED=false
ASSISTANT_DND_START=23:00
ASSISTANT_DND_END=07:00
# urgent messages always get through
ASSISTANT_DND_ALLOW_URGENT=true
